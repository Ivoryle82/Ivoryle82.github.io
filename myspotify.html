<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>quamatbong</title>
</head>
<body>

<header>
    <div class="header-container">
        <div class="logo">QuaMatBong</div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="myphotos.html">My Photos</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </nav>
    </div>
</header>

<main class="main-content" style="padding-bottom: 50px;">
    <h1 style="margin-bottom: 10px;">My Spotify Playlist</h1>
    <!-- Embed Spotify Playlist -->
    <iframe
      title="Hibiki 30s"
      src="https://open.spotify.com/embed/playlist/0mmtcM3w5OiGMCQFnvk9Wf?utm_source=generator" 
      width="100%"
      height="380"
      frameborder="0"
      allowtransparency="true"
      allow="encrypted-media"
    ></iframe>

    <!-- Prompt and button to connect on Spotify -->
    <div class="spotify-connect" style="margin-top: 20px; margin-bottom: 20px;">
        <a href="https://accounts.spotify.com/authorize?client_id=b4c01840ec424a1aa275703fc29b8fac&response_type=code&redirect_uri=https://ivoryle82.github.io/myspotify.html&scope=user-read-private%20user-read-email" class="spotify-button">Let's connect on Spotify</a>
    </div>
</main>

<footer>
    <p>&copy; 2024 QuaMatBong. All rights reserved.</p>
</footer>

</body>
<!-- <script>
    // Function to calculate compatibility based on the number of R&B genre tracks
    function calculateCompatibility(topTracks) {
        let rAndBCount = 0;
        topTracks.forEach(track => {
            if (track.album.genres.includes('r&b')) {
                rAndBCount++;
            }
        });
        return rAndBCount;
    }

    // Function to fetch user's top tracks
    async function fetchUserTopTracks(token) {
        const response = await fetch('https://api.spotify.com/v1/me/top/tracks?time_range=long_term&limit=5', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`
            }
        });

        const data = await response.json();
        return data.items;
    }

    // Function to handle Spotify authentication and calculate compatibility
   // Function to handle Spotify authentication and calculate compatibility
    async function handleSpotifyLogin() {
        try {
            // Retrieve the access token from the URL
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');

            // Exchange authorization code for access token
            const accessToken = await exchangeCodeForToken(code);

            // Fetch user's top tracks
            const topTracks = await fetchUserTopTracks(accessToken);
            
            // Calculate compatibility based on the number of R&B genre tracks
            const compatibilityScore = calculateCompatibility(topTracks);

            // Display the compatibility score
            alert(`Compatibility Score: ${compatibilityScore}`);
        } catch (error) {
            console.error('Error:', error.message);
            alert('Failed to fetch user data. Please try again.');
        }
    }

    // Add event listener to the Spotify login button
    document.querySelector('.spotify-button').addEventListener('click', handleSpotifyLogin);

    // Function to exchange authorization code for access token
    // Function to exchange authorization code for access token
    async function exchangeCodeForToken(code) {
        const data = {
            grant_type: 'authorization_code',
            code,
            redirect_uri: 'https://ivoryle82.github.io/myspotify.html',
            client_id: 'b4c01840ec424a1aa275703fc29b8fac',
            client_secret: '8f1660e2683942eda372a4aa0ec4d170',
        };

        const response = await fetch('https://accounts.spotify.com/api/token', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams(data)
        });

        const tokenData = await response.json();
        console.log('Access Token:', tokenData.access_token); // Log the access token to the console
        return tokenData.access_token;
    }

    
</script> -->

</html>
